
{% include 'partials/header.html' %}
    <section id="main" class="wrapper">
        <div class="inner">
            <h2>User Dashboard</h2>
            <p>Manage your encrypted text:</p>

            <!-- Display decrypted text if available -->
            {% if decrypted_text %}
                <div class="alert alert-info">Your decrypted text: {{ decrypted_text }}</div>
            {% endif %}

            <!-- Form for adding/modifying encrypted text -->
            <form method="post" action="/save_text">
                <div class="row uniform">
                    <div class="12u$">
                        <textarea placeholder="Enter text to encrypt" name="encrypted_text" id="encryptedText" rows="6" required></textarea>
                    </div>
                    <div class="12u$">
                        <ul class="actions">
                            <li><input type="submit" value="Save Text" class="primary" /></li>
                        </ul>
                    </div>
                </div>
            </form>

            <!-- Button for removing encrypted text -->
            <form method="post" action="/remove_text" class="mt-3">
                <div class="row uniform">
                    <div class="12u$">
                        <ul class="actions">
                            <li><input type="submit" value="Remove My Encrypted Text" class="special" /></li>
                        </ul>
                    </div>
                </div>
            </form>

            <!-- User Information Update Form -->
            <h3>Update Your Information</h3>
            <form method="post" action="/update_profile">
                <div class="row uniform">
                    <div class="6u 12u$(xsmall)">
                        <input type="text" name="nom" id="updateNom" value="" placeholder="Nom" required>
                    </div>
                    <div class="6u$ 12u$(xsmall)">
                        <input type="text" name="prenom" id="updatePrenom" value="" placeholder="Prenom" required>
                    </div>
                    <div class="6u 12u$(xsmall)">
                        <input type="password" name="password" id="updatePassword" placeholder="New Password">
                    </div>
                    <div class="12u$">
                        <ul class="actions">
                            <li><input type="submit" value="Update" class="primary" /></li>
                        </ul>
                    </div>
                </div>
            </form>

            <form method="post" action="/delete_account" class="mt-3" onsubmit="return confirm('Are you sure you want to delete your account? This action cannot be undone.');">
                <div class="row uniform">
                    <div class="12u$">
                        <ul class="actions">
                            <li><input type="submit" value="Delete My Account" class="special" /></li>
                        </ul>
                    </div>
                </div>
            </form>

            <!-- Conditional Admin Dashboard Link -->
            {% if session['role'] == 'admin' %}
                <a href="/admin_dashboard" class="button special">Admin Dashboard</a>
            {% endif %}

            <a href="/logout" class="button alt">Logout</a>
        </div>
    </section>

    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/browser.min.js"></script>
    <script src="assets/js/breakpoints.min.js"></script>
    <script src="assets/js/util.js"></script>
    <script src="assets/js/main.js"></script>
{% include 'partials/footer.html' %}